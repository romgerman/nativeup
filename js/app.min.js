function getSelectionText(){var b="";return window.getSelection?b=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(b=document.selection.createRange().text),b}var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Vue.component("datepicker",{template:"#datepicker",props:{year:{type:Number,default:new Date().getFullYear()},month:{type:Number,default:new Date().getMonth()},day:{type:Number,default:new Date().getDate()},showDays:{type:Boolean,default:!1}},computed:{getYears:function(){var b=[new Date().getFullYear()];return b},getMonths:function(){return monthNames},getDays:function(){return new Date(this.year,this.month,0).getDate()}}}),Vue.component("diff",{template:"#diff"}),Vue.component("item",{template:"#item",props:{def:Object,defAddr:String,namespace:String,open:{type:Boolean,default:!1},diffOpen:Boolean},computed:{name:function(){for(var g,b=this.wrapType(this.def.returnType)+" "+(this.open?this.wrapNamespace(this.namespace+"::"):"")+this.def.name+"(",d=Object.keys(this.def.params),f=0;f<d.length;f++)g=this.def.params[d[f]],b+=this.wrapType(g.type)+" ",b+=this.wrapParam(g.name),f!==d.length-1&&(b+=", ");return b+")"},addr:function(){return"0x"+this.defAddr+(this.def.hash?" 0x"+this.def.hash:"")},linkAddr:function(){return"#"+this.namespace+"/"+this.defAddr},description:function(){var b=this.def.description.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");return this.wrapUrls(b)}},methods:{wrapType:function(b){return"<span class=\"type\">"+b+"</span>"},wrapParam:function(b){return"<span class=\"param\">"+b+"</span>"},wrapNamespace:function(b){return"<span class=\"namespace\">"+b+"</span>"},wrapUrls:function(b){return b.replace(/(https?:\/\/[^\s]+\w)|(pastebin.com\/+\w*)/g,d=>{return"<a href=\""+(d.startsWith("http")?d:"http://"+d)+"\" target=\"_blank\">"+d+"</a>"})},onClick:function(b){var d=getSelectionText();return 0<d.length?void b.preventDefault():void(this.open=!this.open)},onGetLinkClick:function(b){this.$root.shiftKey?Router.add(b):Router.set(b)},openDiffs:function(){this.diffOpen=!this.diffOpen}}});var Router={run:function(){var b=window.location.hash;if(1>=b.length)return null;if(b=b.substr(1).split("/").filter(Boolean),""===b[0])return null;for(var d=[],f=null,g=0;g<b.length;g++)Router.IsNamespace(b[g])?f?(d.push(f),f={name:b[g]}):f={name:b[g]}:f&&(f.list?f.list.push(b[g]):(f.list=[],f.list.push(b[g])));return f&&d.push(f),d},IsNamespace:function(b){for(var d=0;d<app.namespaces.length;d++)if(b.toLowerCase()===app.namespaces[d].toLowerCase())return!0;return!1},set:function(b){var d=b.charAt(b.length-1);"#"===d&&(b=b.slice(1)),window.location.hash=b},add:function(b){var d=window.location.hash.charAt(window.location.hash.length-1),f=window.location.hash.split("/").filter(l=>""!==l);if(!Router.IsNamespace(b)){b=b.slice(1),b=b.split("/");var g=b[0],h="";if(0!==f.length){f[0]=f[0].slice(1);for(var k=f.length-1;0<=k;k--)if(Router.IsNamespace(f[k])){h=f[k];break}}"#"===h.charAt(0)&&(h=h.slice(1)),window.location.hash+=g.toLowerCase()===h.toLowerCase()?"/"+b[1]:Router.IsNamespace(h)||""===h?"/"+b[0]+"/"+b[1]:"/"+b[1]}else window.location.hash+="/"===d?b:"/"+b}},app=new Vue({el:"#container",data:{namespaces:null,content:[],stack:null,shiftKey:!1,ctrlKey:!1,query:"",theme:!1},created:function(){var b=this,d=Cookies.get("theme");d&&"true"===d&&this.switchTheme(),this.$http.get("/get/namespaces").then(f=>{b.namespaces=f.body;var g=Router.run();g?g.forEach(h=>{if(h.list)for(var k={name:h.name,partial:!0,body:{}},l=0,m=0;m<h.list.length;m++)this.$http.get("/get/latest/function/"+h.list[m]).then(o=>{k.body[h.list[l]]=o.body,l==h.list.length-1&&b.content.push(k),l++});else this.$http.get("/get/latest/namespace/"+h.name).then(o=>{b.content.push({name:h.name,body:o.body})})}):this.$http.get("/get/latest/namespace/player").then(h=>{b.content.push({name:"PLAYER",body:h.body})})}),window.addEventListener("keydown",f=>{16===f.which&&(b.shiftKey=!0),17===f.which&&(b.ctrlKey=!0)}),window.addEventListener("keyup",f=>{16===f.which&&(b.shiftKey=!1),17===f.which&&(b.ctrlKey=!1)})},methods:{isMenuItemActive:function(b){for(var d=0;d<this.content.length;d++)if(b.toLowerCase()===this.content[d].name.toLowerCase())return d;return null},onMenuItemClick:function(b){var d=this.isMenuItemActive(b);if(!d||this.content[d].partial||""!==this.query){""!==this.query&&(this.stack=null,this.query="");var f=this,g=this.shiftKey;this.ctrlKey||(g?Router.add(b):Router.set(b)),this.$http.get("/get/latest/namespace/"+b).then(h=>{g||(f.content=[]),f.content.push({name:b,body:h.body})})}},switchTheme:function(){var b=document.getElementsByTagName("link").item(2);b.href=b.href.replace(this.theme?"dark":"light",this.theme?"light":"dark"),this.theme=!this.theme,Cookies.set("theme",this.theme,{expires:365})}},watch:{query:function(b){if(""===b||2>b.length)return void(this.stack&&(this.content=this.stack,this.stack=null));var f=this;this.$http.get("/search/"+b).then(function(g){if(g.body){f.stack||(f.stack=f.content),f.content=[];for(var h=Object.keys(g.body),k=0;k<h.length;k++)f.content.push({name:h[k],body:g.body[h[k]]})}})}}});